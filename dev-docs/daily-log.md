# 일자별 작업기록
## 221210
- 네이버 지도 API 키 발급 완료
- 기상청 날씨 API 키 발급 완료
- 교통소통정보 API 키 승인 대기

## 221211
- 스택 선정
  - 서버: Nest.js
  - 클라이언트: Kotlin

## 221212
- 국가교통정보센터 API 키 발급 완료
- 클라이언트 플랫폼을 안드로이드에서 웹으로 변경

## 221213
- 별도 html 파일에서 지도 API 출력 확인
  - geolocation 메서드로 위도, 경도 받아와서 초기값으로 넣어서 렌더링
- 작업원칙 작성

## 221214
- 깃허브에 Create Issue Branch 확장 설치
- Nest.js 기본 형태 파악: 모듈, 컨트롤러, 서비스
- hbs 미들웨어 적용
  - Render 데코레이터로 원하는 컨트롤러에 hbs 파일 호출
  - 서비스에 비즈니스 로직 작성하고 컨트롤러에 주입

## 221215
- 교통소통정보, 네이버지도 API 사용법 파악

## 221216
- 교통소통정보 API가 응답하는 XML 데이터를 JSON으로 파싱
- 개발문서 정리
- 아키텍처 정리 => 모듈 어떻게 나눌지, 비즈니스 로직 어디로 들어갈지
- Nest.js의 Singleton 개념 공부 (https://docs.nestjs.com/modules)

## 221219
### 성공한 일
- web dynamic map 기능 리스트업
  - 예제가 죄다 제이쿼리라서 난감하다;;;
  - 제이쿼리 바닐라 변환 치트시트 => https://github.com/jackocnr/intl-tel-input/wiki/Converting-jQuery-to-JavaScript
- 지도에 줌 컨트롤 작은버튼 추가
- 브이월드 API 키 발급
- 네이버지도 CDN에서 서브모듈을 붙이려면 본주소 뒤에 `&amp;`을 붙인 다음 입력하면 된다

### 시도한 일
- view 엔진을 hbs에서 html로 바꾸는 것과, 파일 모듈을 사용해서 html 문자열을 텍스트 파일로 취급하는 것을 검토
  - => 둘다 안됨 ㅠㅠ 길게 붙잡지 말고 패스
- 현위치로 이동하는 버튼 만드는게 의외로 어렵네? ㄷㄷ
  - => 일단 길게 붙잡지 말고 패스

### 생각한 것
- 교통소통정보 API 기능 리스트업이랑 Nest.js 입출력 연습을 해야 하는데, 어차피 교통 API는 정보가 별로 없어서 요청 해가면서 익히면 될 거 같다

## 221220
- 메인페이지 스크립트 작동순서 처리
  - 렌더링 => 교통 레이어 => 위치권한 순서로 하면 됨
- hbs 파일에서 외부 css랑 js 파일을 인식 못한다. 어느 단에서 문제인걸까?

## 221222
### 브이월드에서 표준교통노드, 링크 출력
- 지도 API를 네이버에서 브이월드로 변경
- 일단 wms를 사용해서 노드, 링크 모두 출력은 가능
- 하지만 브이월드에서는 [출력만 지원하기 때문에](https://www.vworld.kr/v4po_brdqna_s002.do?pageIndex=1&searchCondition=&searchKeyword=&bodIde=53&brdIde=20288&fileCheck=Y&repyCheck=Y) 아무짝에도 쓸모가 없다
- 애초에 노드도 링크도 좌표값을 공개하지 않기 때문에 둘중 선택을 떠나서 어차피 불가능하다
- 브이월드 지도에서는 노드나 링크를 클릭하면 아이디를 띄워주는데 어떻게 했는지 알 수가 없다

### CSV Import
- 다이나모디비는 150줄 까지밖에 임포트가 안 되기 때문에 일단 몽고디비로 해보기로 함
  - 멘토업체에서 제공한 CSV 파일 몽고디비에 임포트 함

## 20221223
### 네이버지도
- 지도API 브이월드에서 도로 네이버로 변경
- 지도에 마커 표시
- 마커 클릭시 좌표 출력되는 이벤트 구현

### mongoose
- 네스트 프로젝트에 몽구스 적용 중

## 20221224
- 교통노드 마커 찍어낼 틀 완성

- @nest/config 패키지 사용해서 환경변수 설정
  - 포트번호, 몽고디비 URI

- 템플릿 엔진은 단순 내용만 제어 가능한 사실 확인
  - => 익스프레스 Response 호출해서 html를 문자열로 제어, 스크립트까지 제어
  - => 메인 페이지를 head, body, script로 구분

- 몽구스 너무 복잡해서 패스
  - => 따로 익스프레스 프로젝트 하나 파서 몽고디비 조회 성공
  - => 디비 필드명 교통API랑 일치하게 변경
